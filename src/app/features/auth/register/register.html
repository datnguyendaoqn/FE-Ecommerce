<div
  class="min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 flex items-center justify-center p-4"
>
  <div class="w-full max-w-md">
    <div class="bg-white rounded-2xl shadow-card-hover p-8 animate-fade-in">
      <div class="text-center mb-8">
        <div
          class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-700 rounded-2xl mb-4 shadow-button"
        >
          <span class="text-white text-3xl font-bold">S</span>
        </div>
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Đăng ký tài khoản!</h1>
        <p class="text-gray-600">Đăng ký để mua sắm</p>
      </div>

      <!-- Form -->
      <form [formGroup]="form" (ngSubmit)="onRegister()" class="space-y-6">
        <!-- Username -->
        <div>
          <label for="username" class="block text-sm font-medium text-gray-700 mb-2">
            Tên đăng nhập
          </label>
          <div class="relative">
            <mat-icon class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"
              >person</mat-icon
            >
            <input
              id="username"
              type="text"
              formControlName="username"
              placeholder="Nhập tên đăng nhập"
              class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all"
            />
          </div>

          @if (form.controls['username'].touched && form.controls['username'].invalid) {
          <p class="text-red-500 text-sm mt-1">
            @if (form.controls['username'].errors?.['required']) { Vui lòng nhập tên đăng nhập. }
            @else if (form.controls['username'].errors?.['minlength']) { Tên đăng nhập phải có ít
            nhất 4 ký tự. }
            @else if (form.controls['username'].errors?.['pattern']) {Tên đăng nhập không được chứa khoảng trắng }

          </p>
          }
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700 mb-2"> Email </label>
          <div class="relative">
            <mat-icon class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"
              >email</mat-icon
            >
            <input
              id="email"
              type="email"
              formControlName="email"
              placeholder="example@email.com"
              class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all"
            />
          </div>
          @if (form.controls['email'].touched && form.controls['email'].invalid) {
          <p class="text-sm text-red-500 mt-1">Vui lòng nhập email hợp lệ</p>
          }
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700 mb-2"> Họ Tên </label>
          <div class="relative">
            <mat-icon class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"
              >contacts</mat-icon
            >
            <input
              id="hoTen"
              type="hoTen"
              formControlName="hoTen"
              placeholder="Nhập tên của bạn"
              class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all"
            />
          </div>

          @if (form.controls['hoTen'].errors?.['minlength']) {
          <p class="text-red-500 text-sm mt-1">Mật khẩu phải có ít nhất 6 ký</p>
          tự. } @if (form.controls['hoTen'].touched && form.controls['hoTen'].invalid) {
          <p class="text-sm text-red-500 mt-1">Vui lòng nhập tên của bạn</p>
          }
        </div>

        <!-- Password -->
        <div>
          <label for="password" class="block text-sm font-medium text-gray-700 mb-2"
            >Mật khẩu</label
          >
          <div class="relative">
            <mat-icon class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">lock</mat-icon>
            <input
              id="password"
              [type]="showPassword() ? 'text' : 'password'"
              formControlName="password"
              placeholder="••••••••"
              class="w-full pl-12 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all"
            />
            <button
              type="button"
              (click)="showPassword.set(!showPassword())"
              class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"
            >
              <mat-icon>{{ showPassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
          </div>
          @if (form.controls['password'].touched && form.controls['password'].invalid) {
          <p class="text-red-500 text-sm mt-1">
            @if (form.controls['password'].errors?.['required']) { Mật khẩu là bắt buộc. } @else if
            (form.controls['password'].errors?.['minlength']) { Mật khẩu phải có ít nhất 6 ký tự. }
            @else if (form.controls['password'].errors?.['pattern']) { Mật khẩu phải có ít nhất 1
            chữ in hoa và 1 chữ số. }
            
          </p>
          }
        </div>

        <!-- Re-password -->
        <div>
          <label for="rePassword" class="block text-sm font-medium text-gray-700 mb-2">
            Nhập lại mật khẩu
          </label>
          <div class="relative">
            <mat-icon class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">lock</mat-icon>
            <input
              id="rePassword"
              [type]="showRePassword() ? 'text' : 'password'"
              formControlName="rePassword"
              placeholder="••••••••"
              class="w-full pl-12 pr-12 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all"
            />
            <button
              type="button"
              (click)="showRePassword.set(!showRePassword())"
              class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"
            >
              <mat-icon>{{ showRePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
          </div>
          @if (form.controls['rePassword'].touched && form.controls['rePassword'].invalid) {
          <p class="text-red-500 text-sm mt-1">
            @if (form.controls['rePassword'].errors?.['required']) { Mật khẩu là bắt buộc. } 
            @else if (form.controls['rePassword'].errors?.['minlength']) { Mật khẩu phải có ít nhất 6 ký tự. }
            @else if (form.controls['rePassword'].errors?.['pattern']) { Mật khẩu phải có ítnhất 1 chữ in hoa và 1 chữ số. }
          </p>
          } @if (!passwordsMatchValidator()) {
          <p class="text-red-500 text-sm mt-1">Mật khẩu nhập lại không trùng khớp</p>
          }
        </div>

        <!-- Submit -->
        <button
          type="submit"
          class="w-full bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white py-3 rounded-xl font-semibold shadow-button hover:shadow-xl transition-all duration-300 flex items-center justify-center space-x-2"
        >
          <span>Đăng Ký</span>
          <mat-icon>arrow_forward</mat-icon>
        </button>
      </form>

      <p class="text-center text-sm text-gray-600 mt-6">
        Đã có tài khoản?
        <a routerLink="/login" class="text-primary-600 hover:text-primary-700 font-semibold">
          Đăng nhập ngay
        </a>
      </p>
    </div>

    <style>
      @keyframes fade-in {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .animate-fade-in {
        animation: fade-in 0.5s ease-out;
      }
    </style>
  </div>
</div>
